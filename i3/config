#############################################################################
# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!
#############################################################################

set $mod		Mod4
set $config		~/.config/i3/
set $scripts	~/.config/i3/scripts

font pango:DejaVu Sans Mono 10

# lock the screen after 5 minutes
exec --no-startup-id xset s on; xset 120
exec --no-startup-id xss-lock --transfer-sleep-lock -- $scripts/lock-screen.sh
exec --no-startup-id pasystray
exec --no-startup-id copyq
exec --no-startup-id dropbox start
exec --no-startup-id ~/.local/jetbrains-toolbox-1.17.6856/jetbrains-toolbox

# keyboard layout us international
exec --no-startup-id setxkbmap -layout us -variant altgr-intl -option nodeadkeys

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume	exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume	exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute			exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute		exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# Use xbacklight to adjust display backlight
bindsym XF86MonBrightnessUp     exec xbacklight -inc 20
bindsym XF86MonBrightnessDown   exec xbacklight -dec 20

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal

# kill focused window
bindsym $mod+Shift+q kill

# start dmenu (a program launcher)
bindsym $mod+d exec --no-startup-id i3-dmenu-desktop

# change focus
bindsym $mod+h				focus left
bindsym $mod+j				focus down
bindsym $mod+k				focus up
bindsym $mod+l				focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left			focus left
bindsym $mod+Down			focus down
bindsym $mod+Up				focus up
bindsym $mod+Right			focus right

# move focused window
bindsym $mod+Shift+h		move left
bindsym $mod+Shift+j		move down
bindsym $mod+Shift+k		move up
bindsym $mod+Shift+l		move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left		move left
bindsym $mod+Shift+Down		move down
bindsym $mod+Shift+Up		move up
bindsym $mod+Shift+Right	move right

# split in horizontal orientation
bindsym $mod+backslash		split h

# split in vertical orientation
bindsym $mod+underscore		split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen	toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout		stacking
bindsym $mod+w layout		tabbed
bindsym $mod+e layout		toggle split

# toggle tiling / floating
bindsym $mod+Shift+space	floating toggle

# change focus between tiling / floating windows
bindsym $mod+space			focus mode_toggle

# focus the parent container
bindsym $mod+a				focus parent

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $terms      "1: terms"
set $web        "2: web"
set $multimedia "3: multi"
set $mail       "4: mails"
set $office     "5: office"
set $mindmap    "6: mindmap"

# switch to workspace
bindsym $mod+1 workspace number $terms
bindsym $mod+2 workspace number $web
bindsym $mod+3 workspace number $multimedia
bindsym $mod+4 workspace number $mail
bindsym $mod+5 workspace number $office
bindsym $mod+6 workspace number $mindmap
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number $terms
bindsym $mod+Shift+2 move container to workspace number $web
bindsym $mod+Shift+3 move container to workspace number $multimedia
bindsym $mod+Shift+4 move container to workspace number $mail
bindsym $mod+Shift+5 move container to workspace number $office
bindsym $mod+Shift+6 move container to workspace number $mindmap
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10

# default workspaces output
workspace $terms		output HDMI1
workspace $web			output HDMI1
workspace $multimedia	output eDP1
workspace $mail			output eDP1
workspace $office		output eDP1
workspace $mindmap		output eDP1

bindsym $mod+Shift+c		reload
bindsym $mod+Shift+r		restart

# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e		exec i3-msg exit

# lock wall
bindsym $mod+Ctrl+l		exec --no-startup-id $scripts/lock-screen.sh

# modes (see below)
bindsym $mod+r			mode "resize"
bindsym $mod+BackSpace	mode "$mode_system"
bindsym $mod+x			mode "$mode_display"

# resize window (you can also use the mouse for that)
mode "resize" {
        bindsym h		resize shrink width 10 px or 10 ppt
        bindsym j		resize shrink height 10 px or 10 ppt
        bindsym k		resize grow height 10 px or 10 ppt
        bindsym l		resize grow width 10 px or 10 ppt

        bindsym Right	resize grow width 10 px or 10 ppt
        bindsym Up		resize grow height 10 px or 10 ppt
        bindsym Down	resize shrink height 10 px or 10 ppt
        bindsym Left	resize shrink width 10 px or 10 ppt

        bindsym Return mode "default"
        bindsym Escape mode "default"
        bindsym $mod+r mode "default"
}

# lock and logout
mode "$mode_system" {
	# lock screen
	bindsym l       exec --no-startup-id $scripts/lock-screen.sh, mode "default"

	# exit
    bindsym e       exec --no-startup-id i3-msg exit, mode "default"

	# suspend
    bindsym s       exec --no-startup-id $scripts/lock-screen.sh && systemctl suspend, mode "default"

	# hibernate
    bindsym h       exec --no-startup-id $scripts/lock-screen.sh && systemctl hibernate, mode "default"

	# reboot
    bindsym r       exec --no-startup-id systemctl reboot, mode "default"

	# shutdown
    bindsym Ctrl+s  exec --no-startup-id systemctl poweroff -i, mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
set		$mode_system		System (l) lock, (e) logout, (s) suspend, (h) hibernate, (r) reboot, (Ctrl+s) shutdown

# display configuration
mode "$mode_display" {
    bindsym m exec --no-startup-id $scripts/display.sh mirror,		 mode "default"
    bindsym 1 exec --no-startup-id $scripts/display.sh hdmi   left,  mode "default"
    bindsym 2 exec --no-startup-id $scripts/display.sh hdmi   right, mode "default"
    bindsym 3 exec --no-startup-id $scripts/display.sh laptop left,  mode "default"
    bindsym 4 exec --no-startup-id $scripts/display.sh laptop right, mode "default"
    bindsym 5 exec --no-startup-id $scripts/display.sh hdmi	  off,   mode "default"
    bindsym 6 exec --no-startup-id $scripts/display.sh laptop off,   mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
set $mode_display Display: m) Mirror 1) Mon left 2) Mon right 3) Lap left 4) Lap right 5) Mon off 6) Lap off
exec --no-startup-id $scripts/display.sh hdmi left


# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
	tray_output primary
	status_command i3status --config $config/i3status.conf
}

# styles
for_window [class="^Pavucontrol$"] floating enable
for_window [class="^copyq$"] floating enable
for_window [class="^JetBrains Toolbox$"] floating enable

#for_window [class="^.*"] border pixel 2
